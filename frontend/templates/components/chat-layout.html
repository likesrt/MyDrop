<!-- 聊天界面主布局模板 - 按照demo.html的正确结构 -->
<header id="mainHeader" class="border-b backdrop-blur px-4 py-3 flex items-center justify-between anim-fadeInDown" style="animation-delay:.05s">
  <div id="brandTitle" class="font-semibold flex items-center gap-2">
    <a href="/" class="hover:underline">MyDrop</a>
  </div>
  <div id="headerActions" class="flex items-center gap-3">
    <div class="text-sm text-slate-600"><span id="deviceNameLabel" class="font-medium">{{deviceName}}</span></div>
    <button id="aliasBtn" class="btn pressable text-xs">设备名称</button>
    <a id="settingsBtn" href="/admin" class="inline-flex items-center justify-center w-9 h-9 border rounded btn pressable" title="设置" aria-label="设置" style="line-height: 1;">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" class="w-6 h-6 flex-shrink-0" fill="currentColor" style="display: block;">
        <path d="M904.533333 422.4l-85.333333-14.933333-17.066667-38.4 49.066667-70.4c14.933333-21.333333 12.8-49.066667-6.4-68.266667l-53.333333-53.333333c-19.2-19.2-46.933333-21.333333-68.266667-6.4l-70.4 49.066666-38.4-17.066666-14.933333-85.333334c-2.133333-23.466667-23.466667-42.666667-49.066667-42.666666h-74.666667c-25.6 0-46.933333 19.2-53.333333 44.8l-14.933333 85.333333-38.4 17.066667L296.533333 170.666667c-21.333333-14.933333-49.066667-12.8-68.266666 6.4l-53.333334 53.333333c-19.2 19.2-21.333333 46.933333-6.4 68.266667l49.066667 70.4-17.066667 38.4-85.333333 14.933333c-21.333333 4.266667-40.533333 25.6-40.533333 51.2v74.666667c0 25.6 19.2 46.933333 44.8 53.333333l85.333333 14.933333 17.066667 38.4L170.666667 727.466667c-14.933333 21.333333-12.8 49.066667 6.4 68.266666l53.333333 53.333334c19.2 19.2 46.933333 21.333333 68.266667 6.4l70.4-49.066667 38.4 17.066667 14.933333 85.333333c4.266667 25.6 25.6 44.8 53.333333 44.8h74.666667c25.6 0 46.933333-19.2 53.333333-44.8l14.933334-85.333333 38.4-17.066667 70.4 49.066667c21.333333 14.933333 49.066667 12.8 68.266666-6.4l53.333334-53.333334c19.2-19.2 21.333333-46.933333 6.4-68.266666l-49.066667-70.4 17.066667-38.4 85.333333-14.933334c25.6-4.266667 44.8-25.6 44.8-53.333333v-74.666667c-4.266667-27.733333-23.466667-49.066667-49.066667-53.333333z m-19.2 117.333333l-93.866666 17.066667c-10.666667 2.133333-19.2 8.533333-23.466667 19.2l-29.866667 70.4c-4.266667 10.666667-2.133333 21.333333 4.266667 29.866667l53.333333 76.8-40.533333 40.533333-76.8-53.333333c-8.533333-6.4-21.333333-8.533333-29.866667-4.266667L576 768c-10.666667 4.266667-17.066667 12.8-19.2 23.466667l-17.066667 93.866666h-57.6l-17.066666-93.866666c-2.133333-10.666667-8.533333-19.2-19.2-23.466667l-70.4-29.866667c-10.666667-4.266667-21.333333-2.133333-29.866667 4.266667l-76.8 53.333333-40.533333-40.533333 53.333333-76.8c6.4-8.533333 8.533333-21.333333 4.266667-29.866667L256 576c-4.266667-10.666667-12.8-17.066667-23.466667-19.2l-93.866666-17.066667v-57.6l93.866666-17.066666c10.666667-2.133333 19.2-8.533333 23.466667-19.2l29.866667-70.4c4.266667-10.666667 2.133333-21.333333-4.266667-29.866667l-53.333333-76.8 40.533333-40.533333 76.8 53.333333c8.533333 6.4 21.333333 8.533333 29.866667 4.266667L448 256c10.666667-4.266667 17.066667-12.8 19.2-23.466667l17.066667-93.866666h57.6l17.066666 93.866666c2.133333 10.666667 8.533333 19.2 19.2 23.466667l70.4 29.866667c10.666667 4.266667 21.333333 2.133333 29.866667-4.266667l76.8-53.333333 40.533333 40.533333-53.333333 76.8c-6.4 8.533333-8.533333 21.333333-4.266667 29.866667L768 448c4.266667 10.666667 12.8 17.066667 23.466667 19.2l93.866666 17.066667v55.466666z"/>
        <path d="M512 394.666667c-64 0-117.333333 53.333333-117.333333 117.333333s53.333333 117.333333 117.333333 117.333333 117.333333-53.333333 117.333333-117.333333-53.333333-117.333333-117.333333-117.333333z m0 170.666666c-29.866667 0-53.333333-23.466667-53.333333-53.333333s23.466667-53.333333 53.333333-53.333333 53.333333 23.466667 53.333333 53.333333-23.466667 53.333333-53.333333 53.333333z"/>
      </svg>
    </a>
    <button id="themeToggleBtn" class="inline-flex items-center justify-center w-9 h-9 border rounded btn pressable" title="切换主题" aria-label="切换主题" style="line-height:1"></button>
    <button id="logoutBtn" class="text-sm link">退出</button>
  </div>
</header>

<div class="flex-1 flex flex-col overflow-hidden">
  <div id="messages" class="flex-1 overflow-y-auto p-4">
    <div class="flex flex-col gap-2" id="messageList">
      {{messagesList}}
    </div>
  </div>

  <form id="composer" class="border-t backdrop-blur p-3 pb-safe flex flex-col gap-2">
    <div id="composerRow" class="flex gap-2 items-end">
      <textarea id="textInput" rows="1" class="flex-1 border rounded px-3 py-2 resize-none max-h-40 overflow-auto" placeholder="输入消息... (Enter 换行, Ctrl+Enter 发送)"></textarea>
      <label id="fileBtn" class="shrink-0 inline-flex items-center justify-center w-10 h-10 border rounded cursor-pointer select-none" title="添加文件" aria-label="添加文件">
        <input id="fileInput" type="file" class="hidden" multiple />
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M20.5 12.5l-7.778 7.778a5.5 5.5 0 11-7.778-7.778L12.5 5.222a3.5 3.5 0 114.95 4.95L9.672 17.95a1.5 1.5 0 11-2.122-2.122L14.56 8.818"/></svg>
      </label>
      <button type="button" id="fsEditBtn" class="shrink-0 inline-flex items-center justify-center w-10 h-10 border rounded" title="全屏编辑" aria-label="全屏编辑">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="w-5 h-5"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.75" d="M4 9V4h5M20 9V4h-5M4 15v5h5M20 15v5h-5"/></svg>
      </button>
      <button id="sendBtn" class="btn btn-primary pressable shrink-0 px-4">发送</button>
    </div>
    <div id="selectedFiles" class="text-xs text-slate-600"></div>
    <div class="text-xs text-slate-500">单个文件上限：{{fileSizeLimit}}MB；全局最多 {{maxFiles}} 个文件</div>
  </form>
</main>
